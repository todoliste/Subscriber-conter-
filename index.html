<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calculatrice Collège</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    background:#111; color:white; font-family:Arial;
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; margin:0; padding:10px;
}
#calc, #secret {
    width:100%; max-width:360px; padding:15px; border-radius:15px;
    background:#222; box-shadow:0 0 15px #000;
    box-sizing:border-box;
}
#screen {
    width:100%; height:60px; font-size:24px;
    text-align:right; padding:10px; border:none;
    background:#000; color:#0f0; border-radius:10px;
    margin-bottom:10px;
    box-sizing:border-box;
}
.button-row {
    display:flex; flex-wrap:wrap; justify-content:space-between;
}
button {
    flex:1 1 22%; margin:5px 2%; height:60px;
    font-size:22px; border:none; border-radius:10px;
    background:#333; color:white; cursor:pointer;
    min-width:50px;
}
#secret { display:none; max-height:80vh; overflow:auto; }
.tabs { display:flex; flex-wrap:wrap; margin-bottom:10px; }
.tab { flex:1 1 48%; padding:8px; text-align:center; cursor:pointer; background:#333; border-radius:10px; margin:2px; font-size:14px;}
.tab.active { background:#0f0; color:#000; }
textarea { width:100%; height:200px; background:#000; color:#0f0; padding:10px; font-size:16px; border-radius:10px; border:none; margin-bottom:10px; box-sizing:border-box; }
#dictionary { display:none; background:#111; padding:10px; border-radius:10px; max-height:200px; overflow:auto; }
</style>
</head>
<body>

<div id="calc">
    <input type="text" id="screen" disabled>
    <div class="button-row">
        <button onclick="press('7')">7</button>
        <button onclick="press('8')">8</button>
        <button onclick="press('9')">9</button>
        <button onclick="press('/')">/</button>

        <button onclick="press('4')">4</button>
        <button onclick="press('5')">5</button>
        <button onclick="press('6')">6</button>
        <button onclick="press('*')">*</button>

        <button onclick="press('1')">1</button>
        <button onclick="press('2')">2</button>
        <button onclick="press('3')">3</button>
        <button onclick="press('-')">-</button>

        <button onclick="press('0')">0</button>
        <button onclick="press('.')">.</button>
        <button onclick="equal()">=</button>
        <button onclick="press('+')">+</button>

        <button style="flex:1 1 100%" onclick="clearCalc()">C</button>
    </div>
</div>

<div id="secret">
    <div class="tabs">
        <div class="tab active" onclick="showTab('Maths')">Maths</div>
        <div class="tab" onclick="showTab('Francais')">Français</div>
        <div class="tab" onclick="showTab('Histoire')">Histoire-Géo</div>
        <div class="tab" onclick="showTab('SVT')">SVT</div>
        <div class="tab" onclick="showTab('Physique')">Physique-Chimie</div>
        <div class="tab" onclick="showTab('Anglais')">Anglais</div>
        <div class="tab" onclick="showTab('Techno')">Technologie</div>
        <div class="tab" onclick="showTab('EMC')">EMC</div>
    </div>

    <textarea id="notes"></textarea>
    <button onclick="saveNotes()" style="width:100%;margin-bottom:10px;">Sauvegarder</button>
    <button onclick="toggleDictionary()" style="width:100%;margin-bottom:10px;">Dictionnaire</button>
    <button onclick="closeSecret()" style="width:100%;">Fermer</button>

    <div id="dictionary">
        <h3>Dictionnaire</h3>
        <p><b>Exemple:</b> Théorème de Pythagore → a²+b²=c²</p>
        <p>Photosynthèse → Processus par lequel les plantes produisent leur nourriture</p>
        <p>Électricité → Circulation des électrons dans un conducteur</p>
        <p>Exercice → Petit problème ou activité pour s’entraîner</p>
        <p>Etc…</p>
    </div>
</div>

<script>
let screen = document.getElementById("screen");
let equalsPressCount = 0;
let currentTab = "Maths";

function press(value) { screen.value += value; }
function clearCalc() { screen.value = ""; }
function equal() {
    try { screen.value = eval(screen.value); }
    catch { screen.value="Erreur"; }
    equalsPressCount++;
    if (equalsPressCount>=4) openSecret();
}

function openSecret() {
    document.getElementById("calc").style.display="none";
    document.getElementById("secret").style.display="block";
    equalsPressCount=0;
    loadNotes(currentTab);
}

function closeSecret() {
    document.getElementById("secret").style.display="none";
    document.getElementById("calc").style.display="block";
}

function showTab(tab) {
    currentTab = tab;
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    loadNotes(tab);
}

function saveNotes() {
    localStorage.setItem("notes_"+currentTab, document.getElementById("notes").value);
    alert("Notes sauvegardées !");
}
function loadNotes(tab) {
    document.getElementById("notes").value = localStorage.getItem("notes_"+tab) || "";
}

function toggleDictionary() {
    const dic = document.getElementById("dictionary");
    dic.style.display = dic.style.display === "none" ? "block" : "none";
}
</script>

</body>
</html>